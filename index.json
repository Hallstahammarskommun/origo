{
    "controls": [{
        "name": "geoposition"
    }, {
        "name": "mapmenu"
    }, {
        "name": "search",
        "options": {
            "urlAds": "https://karta.hallstahammar.se/sAds",
            "urlFat": "https://karta.hallstahammar.se/sFat",
            "urlGan": "https://karta.hallstahammar.se/sGan",
            "geometryAttribute": "st_astext",
            "searchAttribute": "title",
            "titleAttribute": "title",
            "contentAttribute": "content"
        }
    }, {
        "name": "sharemap"
    }, {
        "name": "print"
    }, {
      "name": "about",
      "options": {
        "title": "Om kartan",
        "content": "<p>Hallstakartan är en karttjänst framtagen av tekniska förvaltningen på Hallstahammars kommun. I kartan hittar du olika typer av samhällsinformation.</p><p>Vi rekommenderar att du använder den senaste versionen av din webbläsare för att kartan ska fungera som bäst.</p><p>Data som finns i karttjänsten saknar rättsverkan.</p>"
      }
    }, {
        "name": "measure"
    }, {
        "name": "legend",
        "options": {
          "hasMapLegend": false
        }
    }],
    "footer": [{
    "img": "css/png/kommunvapen.png",
    "url" : "http://www.hallstahammar.se/",
    "urlText": "Hallstahammars kommun"
    }],
    "projectionCode": "EPSG:3010",
    "projectionExtent": [-166640, 6305699, 433362, 6905701],
    "proj4Defs": [{
        "code": "EPSG:3010",
        "alias": "urn:ogc:def:crs:EPSG::3010",
        "projection": "+proj=tmerc +lat_0=0 +lon_0=16.5 +k=1 +x_0=150000 +y_0=0 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs"
    }],
    "extent": [-16640, 6455699, 283362, 6755701],
    "center": [133361, 6605700],
    "zoom": 2,
    "resolutions": [
      91.9577,
      61.3051,
      40.8701,
      27.2467,
      18.1645,
      12.1097,
      8.0731,
      5.382,
      3.588,
      2.392,
      1.5947,
      1.0631,
      0.7088,
      0.4725,
      0.315,
      0.21,
      0.14
    ],
    "source": {
        "wms": {
            "url": "https://karta.hallstahammar.se/geoserver/extern/wms",
            "version": "1.1.1"
        },
        "local": {
            "url": "https://karta.hallstahammar.se/geoserver/ows"
        },
        "basemap": {
            "url": "https://karta.hallstahammar.se/geoserver/bakgrund/gwc/service/wmts"
        }
    },
    "groups": [{
        "name": "bygga",
        "title": "Bygga & bo",
        "expanded": true
    }, {
        "name": "energi",
        "title": "Energi & miljö",
        "expanded": true
    }, {
        "name": "trafik",
        "title": "Trafik & resor",
        "expanded": true
    }, {
        "name": "uppleva",
        "title": "Uppleva & göra",
        "expanded": true
    }, {
        "name": "utbildning",
        "title": "Utbildning & barnomsorg",
        "expanded": true
    }, {
        "name": "background",
        "title": "Bakgrundskartor",
        "expanded": true
    }],
    "layers": [{
      	"name": "fastigheter",
      	"title": "Fastighetsgränser",
      	"style": "granser",
      	"group": "bygga",
      	"type": "GROUP",
      	"visible": false,
      	"layers": [
      		{
              "name": "granser",
              "source": "wms",
              "style": "granser",
              "format": "image/png",
              "group": "bygga",
              "type": "WMS",
              "visible": true
          }, {
              "name": "TK_s_fat_y",
              "source": "local",
              "style": "TK_s_fat_y",
              "title": "Fastighet",
              "format": "image/png",
              "group": "bygga",
              "type": "WFS",
              "visible": true,
      		    "attributes": [{
                  "name": "obj"
              }]
          }]
    }, {
        "name": "PL_POLYGON",
        "source": "local",
        "style": "PL_POLYGON",
        "title": "Gällande detaljplan",
        "group": "bygga",
        "type": "WFS",
        "visible": false,
        "attributes": [{
            "name": "TEXT",
            "url": "PLAN_ID",
            "urlPrefix": "http://hallstahammar.se/globalassets/03-bygg--och-miljo/detaljplaner/arken/",
            "urlSuffix": ".pdf"
        }]
    }, {
        "name": "TK_kof_y",
        "source": "local",
        "style": "TK_kof_y",
        "title": "Kommunal mark",
        "group": "bygga",
        "queryable": false,
        "type": "WFS",
        "visible": false
    }, {
        "name": "TK_w_lim_y",
        "source": "local",
        "style": "TK_w_lim_y",
        "title": "Ledig industrimark",
        "group": "bygga",
        "type": "WFS",
        "visible": false,
        "attributes": [{
            "name": "obj",
            "title": "Storlek: "
        }, {
            "name": "typ",
            "title": "Pris: "
        }]
    }, {
        "name": "TK_w_let_y",
        "source": "local",
        "style": "TK_w_let_y",
        "title": "Lediga tomter",
        "group": "bygga",
        "type": "WFS",
        "visible": false,
        "attributes": [{
            "name": "obj",
            "title": "Fastighet: "
        }, {
            "name": "typ",
            "title": "Pris: "
        }, {
            "name": "status",
            "title": "Status: "
        }, {
            "name": "datum",
            "title": "Bokad till: "
        }, {
            "name": "egn",
            "url": "url",
            "title": "Läs mer här: "
        }]
    }, {
        "name": "TK_w_pap_y",
        "source": "local",
        "style": "TK_w_pap_y",
        "title": "Pågående detaljplan",
        "group": "bygga",
        "type": "WFS",
        "visible": false,
        "attributes": [{
            "name": "obj",
            "url": "url"
        }]
    }, {
        "name": "BM_elf_y",
        "source": "local",
        "style": "BM_elf_y",
        "title": "Eldningsförbud",
        "group": "energi",
        "type": "WFS",
        "visible": false,
        "attributes": [{
            "html": "<a href='http://www.hallstahammar.se/Bo-bygga/Miljo-halsa--hallbar-utveckling/eldningsforbud' target='_blank'>Mer information</a>"
        }]
    }, {
        "name": "BM_lim_p",
        "source": "local",
        "style": "BM_lim_p",
        "title": "Livsmedelsinspektion",
        "group": "energi",
        "type": "WFS",
        "visible": false,
        "attributes": [{
            "name": "obj"
        }, {
            "name": "typ"
        }, {
            "name": "egn"
        }, {
            "name": "status"
        }, {
            "html": "<a href='https://eservice.hallstahammar.se/EServiceStart.aspx?id=de4a51a8-d2e5-4768-b2f8-0676099648e1' target='_blank'>Lämna synpunkter och klagomål</a>"
        }]
    }, {
        "name": "Vaghallare",
        "source": "wms",
        "style": "line",
        "title": "Väghållare",
        "format": "image/png",
        "group": "trafik",
        "type": "WMS",
        "visible": false
    }, {
        "name": "BM_nar_y",
        "source": "local",
        "style": "BM_nar_y",
        "title": "Naturreservat",
        "group": "uppleva",
        "type": "WFS",
        "visible": false,
        "attributes": [{
          "html": "<a href='http://hallstahammar.se/Bo-bygga/naturomraden' target='_blank'>Mer information</a>"
        }]
    }, {
        "name": "BU_w_fos_p",
        "source": "local",
        "style": "BU_w_fos_p",
        "title": "Förskola",
        "group": "utbildning",
        "type": "WFS",
        "visible": false,
        "attributes": [{
            "name": "obj",
            "url": "url"
        }, {
            "html": "<a href='https://eservice.hallstahammar.se/EServiceStart.aspx?id=d41aec64-7b30-4d77-bdc6-c4901afe9910' target='_blank'>Ansök om plats</a>"
        }, {
            "name": "egn",
            "title": "Telefon: "
        }]
    }, {
        "name": "BU_w_grs_p",
        "source": "local",
        "style": "BU_w_grs_p",
        "title": "Grundskola",
        "group": "utbildning",
        "type": "WFS",
        "visible": false,
        "attributes": [{
            "name": "obj",
            "url": "url"
        }, {
            "name": "typ",
            "title": "Årskurs: "
        }, {
            "name": "egn",
            "title": "Telefon: "
        }]
    }, {
        "name": "BU_w_gss_p",
        "source": "local",
        "style": "BU_w_gss_p",
        "title": "Grundsärskola",
        "group": "utbildning",
        "type": "WFS",
        "visible": false,
        "attributes": [{
            "name": "obj",
            "url": "url"
        }, {
            "name": "typ",
            "title": "Årskurs: "
        }, {
            "name": "egn",
            "title": "Telefon: "
        }]
    }, {
        "name": "BU_upo_y",
        "source": "local",
        "style": "BU_upo_y",
        "title": "Upptagningsområden",
        "group": "utbildning",
        "type": "WFS",
        "visible": false,
        "attributes": [{
            "name": "omrade",
            "title": ""
        }]
    }, {
        "name": "TK_mak_y",
        "source": "local",
        "style": "TK_mak_y",
        "title": "Mask",
        "group": "tom",
        "queryable": false,
        "type": "WFS",
        "visible": true
    }, {
        "attribution": "&copy Lantmäteriet Geodatasamverkan",
        "format": "image/jpeg",
        "group": "background",
        "name": "topowebbkartan_nedtonad",
        "source": "basemap",
        "title": "Karta, grå",
        "type": "WMTS",
        "style": "karta_gra",
        "visible": true
    }, {
        "attribution": "&copy Lantmäteriet Geodatasamverkan",
        "format": "image/jpeg",
        "group": "background",
        "name": "topowebbkartan",
        "source": "basemap",
        "title": "Karta, färg",
        "type": "WMTS",
        "style": "karta_farg",
        "visible": false
    }, {
        "attribution": "&copy Lantmäteriet Geodatasamverkan",
        "format": "image/jpeg",
        "group": "background",
        "name": "orto",
        "source": "basemap",
        "title": "Flygfoto",
        "type": "WMTS",
        "style": "orto",
        "visible": false
    }],

    "styles": {
        "point": [
            [{
                "icon": {
                    "size": [24, 36],
                    "src": "img/png/drop_blue.png"
                }
            }]
        ],
        "line": [
            [{
                "stroke": {
                    "color": "rgb(0,0,255)",
                    "width": 1
                }
            }]
        ],
        "cirkel": [
            [{
                "circle": {
                    "radius": 6,
                    "stroke": {
                        "color": "rgba(0,0,0,1)",
                        "width": 2
                    },
                    "fill": {
                        "color": "rgba(0,0,0,0.5)"
                    }
                }
            }]
        ],
        "cluster": [
        [
          {
            "circle": {
              "radius": 16,
              "fill": {
                "color": "rgba(255,153,51,0.5)"
              },
              "stroke": {
                "color": "rgba(255,153,51,0.9)",
                "width": 4
              }
            }
          },
          {
            "text": {
              "font": "Bold 12px Arial",
              "textAlign": "center",
              "text": "size",
              "fill": {
                "color": "rgba(0,0,0,1.0)"
              },
              "stroke": {
                "color": "rgba(255,153,51,0.5)",
                "width": 2
              }
            }
          }
        ]
      ],
        "granser": [
            [{
                "stroke": {
                    "color": "rgb(150,61,20)",
                    "width": 1
                }
            }]
        ],
        "PL_POLYGON": [
            [{
                "stroke": {
                    "color": "rgba(229,109,30,0.6)",
                    "width": 1
                },
                "fill": {
                    "color": "rgba(66,89,179,0.3)"
                },
                "filter": "[PLAN_TYP] != '4041'"
            }]
        ],
        "TK_kof_y": [
            [{
                "fill": {
                    "color": "rgba(165,0,165,0.25)"
                },
                "filter": "[typ] == 'Nej'"
            }]
        ],
        "TK_w_lim_y": [
            [{
                "stroke": {
                    "color": "rgba(103, 60, 31, 0.6)",
                    "width": 2
                },
                "fill": {
                    "color": "rgba(103, 60, 31,0.3)"
                }
            }]
        ],
        "TK_w_let_y": [
            [{  "filter": "[status] == 'Ledig'",
                "stroke": {
                    "color": "rgba(0,0,0,0.6)",
                    "width": 1
                },
                "fill": {
                    "color": "rgba(0,225,0,0.3)"
                }
            }],
            [{  "filter": "[status] == 'Bokad'",
                "stroke": {
                    "color": "rgba(0,0,0,0.6)",
                    "width": 1
                },
                "fill": {
                    "color": "rgba(255,255,0,0.3)"
                }
            }],
            [{  "filter": "[status] == 'Såld'",
                "stroke": {
                    "color": "rgba(0,0,0,0.6)",
                    "width": 1
                },
                "fill": {
                    "color": "rgba(255,0,0,0.3)"
                }
            }]
        ],
        "TK_w_pap_y": [
            [{
                "stroke": {
                    "color": "rgba(229,109,30,0.6)",
                    "width": 2
                },
                "fill": {
                    "color": "rgba(255,198,105,0.3)"
                }
            }]
        ],
        "TK_s_fat_y": [
            [{
                "fill": {
                    "color": "rgba(0,0,0,0)"
                }
            }]
        ],
        "BM_elf_y": [
            [{
                "stroke": {
                    "color": "rgb(200,0,0)",
                    "width": 2
                },
                "fill": {
                    "color": "rgba(200,0,0,0.3)"
                }
            }]
        ],
        "BM_lim_p_cluster": [
        [
          {
            "circle": {
              "radius": 16,
              "fill": {
                "color": "rgba(255,153,51,0.5)"
              },
              "stroke": {
                "color": "rgba(255,153,51,0.9)",
                "width": 4
              }
            }
          },
          {
            "text": {
              "font": "Bold 12px Arial",
              "textAlign": "center",
              "text": "size",
              "fill": {
                "color": "rgba(0,0,0,1.0)"
              },
              "stroke": {
                "color": "rgba(255,153,51,0.5)",
                "width": 2
              }
            }
          }
        ]
      ],
        "BM_lim_p": [
            [{
                "icon": {
                    "src": "img/png/BM_lim_p0.png"
                },
                "filter": "[egn] == 'Utan avvikelse'"
            }],
            [{
                "icon": {
                    "src": "img/png/BM_lim_p1.png"
                },
                "filter": "[egn] == 'Med avvikelse'"
            }],
            [{
                "icon": {
                    "src": "img/png/BM_lim_p2.png"
                }
            }]
        ],
        "BM_nar_y": [
            [{
                "stroke": {
                    "color": "rgb(137,210,103)",
                    "width": 2
                },
                "fill": {
                    "color": "rgba(137,210,103,0.3)"
                }
            }]
        ],
        "BU_w_fos_p": [
            [{
                "icon": {
                    "size": [24, 24],
                    "src": "img/png/BU_w_fos_p.png"
                }
            }]
        ],
        "BU_w_grs_p": [
            [{
                "icon": {
                    "size": [24, 24],
                    "src": "img/png/BU_w_grs_p.png"
                }
            }]
        ],
        "BU_w_gss_p": [
            [{
                "icon": {
                    "size": [24, 24],
                    "src": "img/png/BU_w_gss_p.png"
                }
            }]
        ],
        "BU_upo_y": [
            [{
                "fill": {
                    "color": "rgba(178, 223, 138,0.3)"
                },
                "filter": "[omrade] == 'Fredhem'"
            }],
            [{
                "fill": {
                    "color": "rgba(31, 120, 180,0.3)"
                },
                "filter": "[omrade] == 'Näs'"
            }],
            [{
                "fill": {
                    "color": "rgba(255, 127, 0,0.3)"
                },
                "filter": "[omrade] == 'Nibble'"
            }],
            [{
                "fill": {
                    "color": "rgba(202, 178, 214,0.3)"
                },
                "filter": "[omrade] == 'Strömsholm'"
            }],
            [{
                "fill": {
                    "color": "rgba(255, 255, 153,0.3)"
                },
                "filter": "[omrade] == 'Kolbäck'"
            }]
        ],
        "TK_mak_y": [
            [{
                "fill": {
                    "color": "rgba(0,0,0,0.15)"
                }
            }]
        ],
        "karta_gra": [
            [{
                "image": {
                    "src": "img/png/gra.png"
                }
            }]
        ],
        "karta_farg": [
            [{
                "image": {
                    "src": "img/png/farg.png"
                }
            }]
        ],
        "orto": [
            [{
                "image": {
                    "src": "img/png/orto.png"
                }
            }]
        ]
    }
}
